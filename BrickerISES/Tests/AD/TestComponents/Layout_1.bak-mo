within BrickerISES.Tests.AD.TestComponents;
package Layout_1
  model Test_ORC
    replaceable package MediumSf =
      ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP;
    replaceable package MediumCf = ExternalMedia.Examples.WaterCoolProp;
    Components.ORC.ORCunit ORC(redeclare package MediumSf =                                 MediumSf,
        redeclare package MediumCf = MediumCf)
      annotation (Placement(transformation(extent={{-18,-2},{38,60}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot source_sf(redeclare
        package Medium =                                                                        MediumSf,
      Mdot_0=2.6,
      T_0=518.15)
      annotation (Placement(transformation(extent={{-74,70},{-54,90}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP_sf(redeclare
        package Medium =                                                                  MediumSf,
        p0=400000)
      annotation (Placement(transformation(extent={{-70,-12},{-90,8}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP_cf(redeclare
        package Medium =                                                                  MediumCf,
        p0=100000)
      annotation (Placement(transformation(extent={{78,-10},{98,10}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot source_cf(redeclare
        package Medium =                                                                        MediumCf,
      Mdot_0=8.9,
      T_0=333.15)
      annotation (Placement(transformation(extent={{98,50},{78,70}})));
    ThermoCycle.Components.FluidFlow.Sensors.SensTp sensTp(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP)
      annotation (Placement(transformation(extent={{-28,-6},{-48,14}})));
  equation

    connect(ORC.OutFlowCf, sinkP_cf.flangeB) annotation (Line(
        points={{38.8,7.64444},{56,7.64444},{56,0},{79.6,0}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(source_sf.flangeB, ORC.InFlowSf) annotation (Line(
        points={{-55,80},{-18,80},{-18,40.7111},{-18.8,40.7111}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(source_cf.flangeB, ORC.InFlowCf) annotation (Line(
        points={{79,60},{56,60},{56,53.1111},{38.8,53.1111}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(ORC.OutFlowSf, sensTp.InFlow) annotation (Line(
        points={{-18.8,20.0444},{-18.8,-0.8},{-31,-0.8}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sensTp.OutFlow, sinkP_sf.flangeB) annotation (Line(
        points={{-45,-0.8},{-50,-0.8},{-50,-2},{-71.6,-2}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,
              -100},{100,100}}), graphics),
      experiment(StopTime=1000),
      __Dymola_experimentSetupOutput);
  end Test_ORC;

  model Test_ORCHx
    Components.ORC.ORCunitHx oRCunitHx(
      redeclare package MediumSf =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      redeclare package MediumWf = ThermoCycle.Media.R245fa_CP,
      N=15,
      Asf=80,
      Awf=80,
      UnomSf=1000,
      UnomL=1000,
      UnomTp=8000,
      UnomV=2000,
      MdotnomSf=2.6,
      MdotnomWf=2.5,
      MdotWf=2.5,
      UseT=true,
      SteadyStateTWall=true,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      pStartSf=350000,
      pStartWf=2500000,
      TstartInletWf=333.15,
      TstartOutletWf=403.15,
      TstartInletSf=518.15,
      TstartOutletSf=427.15,
      TWf_0=333.15,
      pWf=2500000)
      annotation (Placement(transformation(extent={{-46,-62},{14,-18}})));

    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Mdot_0=2.6,
      p=350000,
      T_0=518.15) annotation (Placement(transformation(extent={{-94,18},{-74,38}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=
          350000)
      annotation (Placement(transformation(extent={{-44,-94},{-24,-74}})));
    Modelica.Blocks.Sources.Constant const(k=60 + 273.15)
      annotation (Placement(transformation(extent={{-10,28},{10,48}})));
    Modelica.Blocks.Sources.Constant const1(k=2.5)
      annotation (Placement(transformation(extent={{-14,54},{-34,74}})));
  equation
    connect(const1.y, oRCunitHx.MdotWfORC) annotation (Line(
        points={{-35,64},{-36,64},{-36,2},{-30,2},{-30,-19.4667},{-23.7143,
            -19.4667}},
        color={0,0,127},
        smooth=Smooth.None));

    connect(const.y, oRCunitHx.TWfORCSu) annotation (Line(
        points={{11,38},{24,38},{24,2},{0,2},{0,-19.4667},{-2.28571,-19.4667}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(sinkP.flangeB, oRCunitHx.OutletSf) annotation (Line(
        points={{-42.4,-84},{-78,-84},{-78,-55.1556},{-47.7143,-55.1556}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sourceMdot.flangeB, oRCunitHx.InletSf) annotation (Line(
        points={{-75,28},{-68,28},{-68,-25.3333},{-46.8571,-25.3333}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (
      Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},{
              100,100}}), graphics),
      experiment(StopTime=1000),
      __Dymola_experimentSetupOutput);
  end Test_ORCHx;

  model Test_ORCHxByPass
    Components.ORC.ORCunitHx oRCunitHx(
      redeclare package MediumSf =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      redeclare package MediumWf = ThermoCycle.Media.R245fa_CP,
      N=15,
      Asf=80,
      Awf=80,
      UnomSf=1000,
      UnomL=1000,
      UnomTp=8000,
      UnomV=2000,
      MdotnomSf=2.6,
      MdotnomWf=2.5,
      MdotWf=2.5,
      UseT=true,
      SteadyStateTWall=true,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      pStartSf=350000,
      pStartWf=2500000,
      TstartInletWf=333.15,
      TstartOutletWf=403.15,
      TstartInletSf=518.15,
      TstartOutletSf=427.15,
      TWf_0=333.15,
      pWf=2500000)
      annotation (Placement(transformation(extent={{-30,-22},{30,22}},
          rotation=0,
          origin={92,-6})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=
          550000)
      annotation (Placement(transformation(extent={{-76,-84},{-96,-64}})));
    Modelica.Blocks.Sources.Constant const(k=60 + 273.15)
      annotation (Placement(transformation(extent={{78,80},{90,92}})));
    Modelica.Blocks.Sources.Constant const1(k=2.5)
      annotation (Placement(transformation(extent={{26,40},{40,54}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SourceP sourceP(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      p0=400000,
      T_0=518.15)
      annotation (Placement(transformation(extent={{-100,70},{-80,90}})));
    ThermoCycle.Components.Units.PdropAndValves.DP dP(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      A=5e3,
      k=1.37394e+07,
      h=0) annotation (Placement(transformation(extent={{18,-78},{-2,-58}})));
   Components.Valve_lin             valve(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Mdot_nom=0.1,
      Afull=5e-05,
      Xopen=0.04) annotation (Placement(transformation(extent={{-10,-10},{10,10}},
          rotation=-90,
          origin={-12,2})));

    ThermoCycle.Components.Units.ExpansionAndCompressionMachines.Pump PumpSF(
      PumpInput=ThermoCycle.Functions.Enumerations.PumpInputs.FF,
      X_pp0=0.5,
      eta_is=0.7,
      M_dot_start=9.4,
      hstart=564.9e3,
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      PumpType=ThermoCycle.Functions.Enumerations.PumpTypes.UD,
      V_dot_max=0.00679956,
      p_su_start=400000)
      annotation (Placement(transformation(extent={{-34,-78},{-54,-58}})));
  equation
    connect(sourceP.flange, oRCunitHx.InletSf) annotation (Line(
        points={{-80.6,80},{61.1429,80},{61.1429,8.66667}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(oRCunitHx.OutletSf, dP.InFlow) annotation (Line(
        points={{60.2857,-21.1556},{60.2857,-68},{17,-68}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sourceP.flange, valve.InFlow) annotation (Line(
        points={{-80.6,80},{-12,80},{-12,11}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sinkP.flangeB, PumpSF.OutFlow) annotation (Line(
        points={{-77.6,-74},{-62,-74},{-62,-60.6},{-49.6,-60.6}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(PumpSF.InFlow, dP.OutFlow) annotation (Line(
        points={{-36.8,-67.5},{-28,-67.5},{-28,-68},{-1,-68}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(valve.OutFlow, dP.OutFlow) annotation (Line(
        points={{-12,-7},{-12,-68},{-1,-68}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(const.y, oRCunitHx.TWfORCSu) annotation (Line(
        points={{90.6,86},{105.714,86},{105.714,14.5333}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const1.y, oRCunitHx.MdotWfORC) annotation (Line(
        points={{40.7,47},{84.2857,47},{84.2857,14.5333}},
        color={0,0,127},
        smooth=Smooth.None));
    annotation (Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,
              -100},{100,100}}), graphics));
  end Test_ORCHxByPass;

  model Test_SF

  ThermoCycle.Components.Units.Solar.SolarField_Soltigua_Inc        solarCollectorIncSchott(
      Mdotnom=0.5,
      redeclare
        ThermoCycle.Components.HeatFlow.Walls.SolarAbsorber.Geometry.Soltigua.PTMx_18
        CollectorGeometry,
      redeclare package Medium1 =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      redeclare model FluidHeatTransferModel =
          ThermoCycle.Components.HeatFlow.HeatTransfer.Ideal,
      N=5,
      Ns=19,
      Tstart_inlet=424.15,
      Tstart_outlet=482.15,
      pstart=100000)
      annotation (Placement(transformation(extent={{-34,-28},{8,42}})));

   ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(
      Mdot_0=2.5,
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      p=100000,
      T_0=423.85)
      annotation (Placement(transformation(extent={{-38,-74},{-18,-54}})));
   ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=
          100000)
      annotation (Placement(transformation(extent={{18,70},{38,90}})));
    Modelica.Blocks.Sources.Constant const(k=25)
      annotation (Placement(transformation(extent={{-120,-8},{-100,12}})));
    Modelica.Blocks.Sources.Constant const1(k=0)
      annotation (Placement(transformation(extent={{-120,20},{-100,40}})));
    Modelica.Blocks.Sources.Constant const3(k=0)
      annotation (Placement(transformation(extent={{-120,54},{-100,74}})));
    Modelica.Blocks.Sources.Step step(
      startTime=200,
      height=0,
      offset=970)
      annotation (Placement(transformation(extent={{-120,-42},{-100,-22}})));
    Modelica.Blocks.Sources.BooleanConstant booleanConstant(k=false)
      annotation (Placement(transformation(extent={{-118,-80},{-98,-60}})));
    ThermoCycle.Components.FluidFlow.Sensors.SensTp sensTp(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP)
      annotation (Placement(transformation(extent={{-6,60},{-26,80}})));
  equation
    connect(sourceMdot.flangeB, solarCollectorIncSchott.InFlow) annotation (
        Line(
        points={{-19,-64},{-8.8,-64},{-8.8,-28.6364}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(const3.y, solarCollectorIncSchott.v_wind) annotation (Line(
        points={{-99,64},{-56,64},{-56,34},{-31.2,34},{-31.2,36.2727}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const1.y, solarCollectorIncSchott.Theta) annotation (Line(
        points={{-99,30},{-64,30},{-64,22.9091},{-31.6667,22.9091}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const.y, solarCollectorIncSchott.Tamb) annotation (Line(
        points={{-99,2},{-68,2},{-68,8.90909},{-31.6667,8.90909}},
        color={0,0,127},
        smooth=Smooth.None));

    connect(step.y, solarCollectorIncSchott.DNI) annotation (Line(
        points={{-99,-32},{-56,-32},{-56,-4.13636},{-31.9,-4.13636}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(booleanConstant.y, solarCollectorIncSchott.Defocusing) annotation (
        Line(
        points={{-97,-70},{-68,-70},{-68,-17.8182},{-31.6667,-17.8182}},
        color={255,0,255},
        smooth=Smooth.None));
    connect(sensTp.InFlow, solarCollectorIncSchott.OutFlow) annotation (Line(
        points={{-9,65.2},{4,65.2},{4,50},{-6,50},{-6,41.3636}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sensTp.OutFlow, sinkP.flangeB) annotation (Line(
        points={{-23,65.2},{-32,65.2},{-32,88},{6,88},{6,80},{19.6,80}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (Diagram(coordinateSystem(extent={{-140,-100},{100,100}},
            preserveAspectRatio=false),
                        graphics),
      experiment(StopTime=1000),
      __Dymola_experimentSetupOutput,
      Icon(coordinateSystem(extent={{-140,-100},{100,100}})));
  end Test_SF;

  model Test_SFWall

  Components.SF.SolarField_SoltiguaWall_Inc        solarCollectorIncSchott(
      Mdotnom=0.5,
      Ns=2,
      redeclare
        ThermoCycle.Components.HeatFlow.Walls.SolarAbsorber.Geometry.Soltigua.PTMx_18
        CollectorGeometry,
      redeclare package Medium1 =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      pstart=1000000,
      Tstart_inlet=298.15,
      Tstart_outlet=373.15,
      Tstart_inlet_wall=300.15,
      Tstart_outlet_wall=383.15,
      redeclare model FluidHeatTransferModel =
          ThermoCycle.Components.HeatFlow.HeatTransfer.Ideal)
      annotation (Placement(transformation(extent={{-34,-28},{8,42}})));

   ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(Mdot_0=0.5,
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      p=200000,
      T_0=298.15)
      annotation (Placement(transformation(extent={{-38,-74},{-18,-54}})));
   ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=200000)
      annotation (Placement(transformation(extent={{18,70},{38,90}})));
    Modelica.Blocks.Sources.Constant const(k=25 + 273.15)
      annotation (Placement(transformation(extent={{-120,-8},{-100,12}})));
    Modelica.Blocks.Sources.Constant const1(k=0)
      annotation (Placement(transformation(extent={{-120,20},{-100,40}})));
    Modelica.Blocks.Sources.Constant const3(k=0)
      annotation (Placement(transformation(extent={{-120,50},{-100,70}})));
    Modelica.Blocks.Sources.Step step(
      startTime=100,
      height=0,
      offset=800)
      annotation (Placement(transformation(extent={{-120,-42},{-100,-22}})));
    Modelica.Blocks.Sources.BooleanConstant booleanConstant
      annotation (Placement(transformation(extent={{-118,-80},{-98,-60}})));
  equation
    connect(sourceMdot.flangeB, solarCollectorIncSchott.InFlow) annotation (
        Line(
        points={{-19,-64},{-8.8,-64},{-8.8,-28.6364}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sinkP.flangeB, solarCollectorIncSchott.OutFlow) annotation (Line(
        points={{19.6,80},{-6,80},{-6,41.3636}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(const3.y, solarCollectorIncSchott.v_wind) annotation (Line(
        points={{-99,60},{-56,60},{-56,34},{-31.2,34},{-31.2,36.2727}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const1.y, solarCollectorIncSchott.Theta) annotation (Line(
        points={{-99,30},{-48,30},{-48,22.9091},{-31.6667,22.9091}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const.y, solarCollectorIncSchott.Tamb) annotation (Line(
        points={{-99,2},{-68,2},{-68,8.90909},{-31.6667,8.90909}},
        color={0,0,127},
        smooth=Smooth.None));

    connect(step.y, solarCollectorIncSchott.DNI) annotation (Line(
        points={{-99,-32},{-56,-32},{-56,-4.13636},{-31.9,-4.13636}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(booleanConstant.y, solarCollectorIncSchott.Defocusing) annotation (
        Line(
        points={{-97,-70},{-68,-70},{-68,-17.8182},{-31.6667,-17.8182}},
        color={255,0,255},
        smooth=Smooth.None));
    annotation (Diagram(coordinateSystem(extent={{-140,-100},{100,100}}),
                        graphics),
      experiment(StopTime=1000),
      __Dymola_experimentSetupOutput,
      Icon(coordinateSystem(extent={{-140,-100},{100,100}})));
  end Test_SFWall;

  model Test_SF_ByPass

  ThermoCycle.Components.Units.Solar.SolarField_Soltigua_Inc        solarCollectorIncSchott(
      Mdotnom=0.5,
      redeclare
        ThermoCycle.Components.HeatFlow.Walls.SolarAbsorber.Geometry.Soltigua.PTMx_18
        CollectorGeometry,
      redeclare package Medium1 =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      redeclare model FluidHeatTransferModel =
          ThermoCycle.Components.HeatFlow.HeatTransfer.Ideal,
      N=5,
      Ns=19,
      Tstart_inlet=424.15,
      Tstart_outlet=482.15,
      pstart=100000)
      annotation (Placement(transformation(extent={{-124,-8},{-82,62}})));
   ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=
          455000)
      annotation (Placement(transformation(extent={{78,100},{98,120}})));
    Modelica.Blocks.Sources.Constant const(k=25)
      annotation (Placement(transformation(extent={{-194,12},{-174,32}})));
    Modelica.Blocks.Sources.Constant const1(k=0)
      annotation (Placement(transformation(extent={{-194,44},{-174,64}})));
    Modelica.Blocks.Sources.Constant const3(k=0)
      annotation (Placement(transformation(extent={{-194,86},{-174,106}})));
    Modelica.Blocks.Sources.Step step(
      startTime=200,
      height=0,
      offset=970)
      annotation (Placement(transformation(extent={{-196,-22},{-176,-2}})));
    Modelica.Blocks.Sources.BooleanConstant booleanConstant(k=false)
      annotation (Placement(transformation(extent={{-192,-60},{-172,-40}})));
   ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Mdot_0=2.6,
      p=100000,
      T_0=424.15)
      annotation (Placement(transformation(extent={{98,-46},{78,-26}})));

    Modelica.Blocks.Sources.Constant const2(k=0.04)
      annotation (Placement(transformation(extent={{-40,36},{-30,46}})));
    ThermoCycle.Components.FluidFlow.Sensors.SensTp sensTp(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP)
      annotation (Placement(transformation(extent={{34,106},{54,126}})));
    ThermoCycle.Components.Units.PdropAndValves.DP dP(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      h=0,
      A=5e3,
      k=2.96368e+07)
           annotation (Placement(transformation(extent={{-66,98},{-46,118}})));
   Components.Valve_lin             valve(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Xopen=0.04,
      Mdot_nom=0.1,
      Afull=2.42718e-05,
      CheckValve=true)
                  annotation (Placement(transformation(extent={{-10,-10},{10,10}},
          rotation=90,
          origin={8,28})));

  equation
    connect(const3.y,solarCollectorIncSchott. v_wind) annotation (Line(
        points={{-173,96},{-130,96},{-130,54},{-121.2,54},{-121.2,56.2727}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const1.y,solarCollectorIncSchott. Theta) annotation (Line(
        points={{-173,54},{-138,54},{-138,42.9091},{-121.667,42.9091}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(const.y,solarCollectorIncSchott. Tamb) annotation (Line(
        points={{-173,22},{-142,22},{-142,28.9091},{-121.667,28.9091}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(step.y,solarCollectorIncSchott. DNI) annotation (Line(
        points={{-175,-12},{-130,-12},{-130,15.8636},{-121.9,15.8636}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(booleanConstant.y,solarCollectorIncSchott. Defocusing) annotation (
        Line(
        points={{-171,-50},{-142,-50},{-142,2.18182},{-121.667,2.18182}},
        color={255,0,255},
        smooth=Smooth.None));
    connect(sourceMdot.flangeB, solarCollectorIncSchott.InFlow) annotation (Line(
        points={{79,-36},{-98.8,-36},{-98.8,-8.63636}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sensTp.OutFlow, sinkP.flangeB) annotation (Line(
        points={{51,111.2},{74,111.2},{74,110},{79.6,110}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(solarCollectorIncSchott.OutFlow, dP.InFlow) annotation (Line(
        points={{-96,61.3636},{-96,108},{-65,108}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(dP.OutFlow, sensTp.InFlow) annotation (Line(
        points={{-47,108},{-6,108},{-6,110},{37,110},{37,111.2}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(valve.InFlow, solarCollectorIncSchott.InFlow) annotation (Line(
        points={{8,19},{8,-36},{-98.8,-36},{-98.8,-8.63636}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(const2.y, valve.cmd) annotation (Line(
        points={{-29.5,41},{-20,41},{-20,28},{0,28}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(valve.OutFlow, sensTp.InFlow) annotation (Line(
        points={{8,37},{8,110},{37,110},{37,111.2}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (Diagram(coordinateSystem(extent={{-200,-120},{180,160}},
            preserveAspectRatio=false), graphics), Icon(coordinateSystem(extent={
              {-200,-120},{180,160}})));
  end Test_SF_ByPass;

  model Test_HX

    ThermoCycle.Components.Units.HeatExchangers.Hx1DInc hx1DInc(
      redeclare package Medium2 =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Mdotnom_sf=2.6,
      Mdotnom_wf=2.5,
      N=15,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      Unom_sf=1000,
      Unom_l=1000,
      Unom_tp=8000,
      Unom_v=2000,
      A_sf=80,
      A_wf=80,
      steadystate_T_wall=true,
      pstart_sf=350000,
      pstart_wf=1800000,
      Tstart_inlet_wf=333.15,
      Tstart_outlet_wf=403.15,
      Tstart_inlet_sf=518.15,
      Tstart_outlet_sf=427.15)
      annotation (Placement(transformation(extent={{-40,-22},{10,22}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      Mdot_0=2.6,
      p=350000,
      T_0=518.15) annotation (Placement(transformation(extent={{22,36},{42,56}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=350000)
      annotation (Placement(transformation(extent={{-64,46},{-44,66}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot1(
      redeclare package Medium = ThermoCycle.Media.R245fa_CP,
      Mdot_0=3,
      p=100000,
      T_0=308.15)
      annotation (Placement(transformation(extent={{-88,-34},{-68,-14}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP1(redeclare package
        Medium = ThermoCycle.Media.R245fa_CP, p0=2500000)
      annotation (Placement(transformation(extent={{42,-40},{62,-20}})));

    ThermoCycle.Components.FluidFlow.Sensors.SensTp sensTp(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP)
      annotation (Placement(transformation(extent={{-52,4},{-72,24}})));
  equation
    connect(sourceMdot.flangeB, hx1DInc.inlet_fl2) annotation (Line(
        points={{41,46},{50,46},{50,10.1538},{3.84615,10.1538}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sourceMdot1.flangeB, hx1DInc.inlet_fl1) annotation (Line(
        points={{-69,-24},{-62,-24},{-62,-22},{-50,-22},{-50,-8.46154},{
            -34.2308,-8.46154}},
        color={0,0,255},
        smooth=Smooth.None));

    connect(hx1DInc.outlet_fl1, sinkP1.flangeB) annotation (Line(
        points={{4.23077,-8.46154},{14,-8.46154},{14,-28},{43.6,-28},{43.6,-30}},
        color={0,0,255},
        smooth=Smooth.None));

    connect(sensTp.InFlow, hx1DInc.outlet_fl2) annotation (Line(
        points={{-55,9.2},{-48,9.2},{-48,9.81538},{-33.8462,9.81538}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(sensTp.OutFlow, sinkP.flangeB) annotation (Line(
        points={{-69,9.2},{-82,9.2},{-82,56},{-62.4,56}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (
      Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},{
              100,100}}),
                      graphics),
      experiment(StopTime=1000),
      __Dymola_experimentSetupOutput);
  end Test_HX;

  model TestBiomassBoiler
    Components.Biomass.Flow1DIncHeatInput flow1DIncHeatInput(
      N=10,
      Discretization=ThermoCycle.Functions.Enumerations.Discretizations.upwind_AllowFlowReversal,
      QcombustionNominal=258e3,
      CombustionInitialization=Modelica.Blocks.Types.Init.InitialState,
      QcombustionStart=10e3,
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      pstart=100000,
      Tstart_inlet=523.15,
      Tstart_outlet=533.15,
      Tstart_inlet_wall=528.15,
      Tstart_outlet_wall=538.15) annotation (Placement(transformation(
          extent={{25,-26},{-25,26}},
          rotation=90,
          origin={-31,8})));

    ThermoCycle.Components.FluidFlow.Reservoirs.SourceMdot sourceMdot(
      Mdot_0=9.4,
      redeclare package Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP,
      p=100000,
      T_0=523.15)
      annotation (Placement(transformation(extent={{-76,-94},{-56,-74}})));
    ThermoCycle.Components.FluidFlow.Reservoirs.SinkP sinkP(redeclare package
        Medium =
          ThermoCycle.Media.Incompressible.IncompressibleTables.TherminolSP, p0=
          100000) annotation (Placement(transformation(extent={{12,48},{32,68}})));
    Modelica.Blocks.Sources.Constant const(k=258e3)
      annotation (Placement(transformation(extent={{-100,20},{-80,40}})));
  equation
    connect(sourceMdot.flangeB, flow1DIncHeatInput.inlet_fl2) annotation (Line(
        points={{-57,-84},{-34.64,-84},{-34.64,-17}},
        color={0,0,255},
        smooth=Smooth.None));
    connect(flow1DIncHeatInput.u, const.y) annotation (Line(
        points={{-51.8,8},{-64,8},{-64,30},{-79,30}},
        color={0,0,127},
        smooth=Smooth.None));
    connect(flow1DIncHeatInput.outlet_fl2, sinkP.flangeB) annotation (Line(
        points={{-34.12,32.5},{-34.12,58},{13.6,58}},
        color={0,0,255},
        smooth=Smooth.None));
    annotation (
      Diagram(coordinateSystem(preserveAspectRatio=false, extent={{-100,-100},{
              100,100}}), graphics),
      experiment(StopTime=100),
      __Dymola_experimentSetupOutput);
  end TestBiomassBoiler;
end Layout_1;
